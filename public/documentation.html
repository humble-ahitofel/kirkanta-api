<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8"/>
  <meta name="author" content="Kirjastot.fi"/>
  <title>Kirjastohakemiston rajapinta 3.0 (beta)</title>
  <style>
    @import url("css/documentation.css");
    @import url("css/navigation.css");
  </style>
</head>
<body>
  <main>
<h1 id="kirjastohakemiston-rajapinta-v3">Kirjastohakemiston rajapinta v3</h1>
<table>
<thead>
<tr>
<th>Päiväys</th>
<th>Rajapinnan versio</th>
<th>Muutoksen kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>10.12.2015</td>
<td>3.0.0</td>
<td>Rajapinta julkaistu</td>
</tr>
<tr>
<td>16.02.2016</td>
<td>3.0.1</td>
<td>Korjattu kuvalinkit palvelu- ja henkilötietoihin</td>
</tr>
<tr>
<td>17.03.2016</td>
<td>3.0.2</td>
<td>Uusi toimipistetyyppi school / koulukirjasto</td>
</tr>
<tr>
<td>25.04.2016</td>
<td>3.1.0</td>
<td>Lisätty aukiolojaksot (period) rajapintaan.</td>
</tr>
<tr>
<td>14.06.2016</td>
<td>3.1.1</td>
<td>Kimppatietoihin (consortium) Finna-laajennukset.</td>
</tr>
<tr>
<td>28.06.2016</td>
<td>3.1.2</td>
<td>Datatyypin määritys &quot;tiedostopäätteillä&quot; (.xml .json .jsonp)</td>
</tr>
<tr>
<td>17.08.2016</td>
<td>3.2.0</td>
<td>Organisaatioista tutut linkit kirjastokimppoihin; linkkiryhmät (link_groups)</td>
</tr>
</tbody>
</table>
<p>Vanhat dokumentaatiot: <a href="/v2-doc.html">API V2</a>, <a href="/v1-doc.html">API V1</a></p>
<p><strong>HUOM</strong>
2016-08-17: Verkkosivulinkkejä voi nyt jakaa ryhmiin. Lisäksi linkit on tuotu consortium-tietotyyppiin. Linkkiryhmät sisällytetään hakutuloksin parametrilla ?with=link_groups. Muutoksen johdosta organisaatiohaun parametri ?with=links on deprekoitu.</p>
<p><strong>HUOM</strong>
2016-03-17: Lisätty uusi toimipistetyyppi school / koulukirjasto.</p>
<h1 id="johdanto">Johdanto</h1>
<p>Kirjastot.fi tarjoaa ilmaisen ja julkisen rajapinnan Kirjastohakemiston tietojen käyttöön kolmannen osapuolen sovelluksissa. Kirjastohakemisto sisältää yleisten kirjastojen, kirjastoautojen sekä oppilaitos- ja muiden erikoiskirjastojen esittelyt ja yhteystiedot. Kirjastohakemiston julkisivu sijaitsee osoitteessa <a href="http://hakemisto.kirjastot.fi">http://hakemisto.kirjastot.fi</a>.</p>
<p>Rajapinnan kolmas versio korvaa kaikki aiemmat versiot, jotka tullaan sulkemaan myöhemmin tulevaisuudessa käytön vähennyttyä.</p>
<p>Teknisissä ongelmissa voi olla yhteydessä Kirjastot.fi&#39;n tekniikkatiimiin: tekniikka@kirjastot.fi.
Sisältöjä koskevista virheistä voi ilmoittaa osoitteeseen hakemisto@kirjastot.fi.</p>
<h1 id="k-ytt-ehdot">Käyttöehdot</h1>
<p>Rajapinnan käyttö on ilmaista sekä kaupallisessa että ei-kaupallisessa tarkoituksessa. Yleisiä käyttörajoituksia ei ole, mutta Kirjastot.fi varaa oikeuden estää kohtuutonta rasitusta aiheuttavien osapuolten pääsyn rajapintaan.</p>
<h2 id="sis-lt-jen-lisenssi">Sisältöjen lisenssi</h2>
<p>Rajapinnan avulla tuotetut tiedot (&quot;teokset&quot;) on lisensoitu <a href="https://creativecommons.org/licenses/by/4.0/deed.fi">Creative Commons 4.0 Nimeä -lisenssillä</a>, joka sallii tietojen muokkaamisen sekä jakamisen uudelleen eri medioissa. Tällöin täytyy mainita aineiston tarjoaja eli Kirjastot.fi, CC 4.0 -lisenssi sekä linkki rajapinnan etusivulle (tähän dokumentaatioon).</p>
<h1 id="rajapinnan-kuvaus">Rajapinnan kuvaus</h1>
<p>Rajapinta noudattaa rest-periaatetta. Kutsut tehdään tavallisina <em>http-pyyntöinä</em> ja kyselyn parametrit välitetään osoitteen <em>query-osassa</em> eli tavallisina get-parametreina. Pyyntöihin vastataan asiakasohjelman määrittämässä muodossa, joka voi olla xml, json tai jsonp. Vastaukseen käytettävän tietotyypin voi asettaa http-protokollan mukaisesti Accept-otsakkeella tai get-parametrilla <em>format</em>, jolla on korkeampi prioriteetti.</p>
<p>Lisäksi 28.06.2016 alkaen vastauksen tietotyypin voi määrittää käyttämällä &quot;tiedostopäätteitä&quot;. Tämä parantaa yhteensopivuutta joidenkin js-kirjastojen kanssa, jotka tunnistavat vastauksen tyypin ensisijaisesti www-osoitteen avulla.</p>
<p>Käytetty merkistö on utf-8. Oletusarvoisesti rajapinta palauttaa 50 tulosta kerrallaan, sivutusta voi hallita parametrein <em>limit</em> ja <em>skip</em>.</p>
<table>
<thead>
<tr>
<th>Tietotyyppi</th>
<th>Mime-tyyppi</th>
<th>Format-parametri</th>
</tr>
</thead>
<tbody>
<tr>
<td>XML</td>
<td>application/xml</td>
<td>xml</td>
</tr>
<tr>
<td>JSON</td>
<td>application/json</td>
<td>json</td>
</tr>
<tr>
<td>JSONP</td>
<td>application/javascript</td>
<td>jsonp</td>
</tr>
</tbody>
</table>
<p>Jsonp-muotoa käyttäessä täytyy myös määrittää ns. callback-funktion nimi get-parametrilla <em>callback</em>. Tyypit json ja jsonp ovat 28.06.2016 alkaen aliaksia toisilleen. Ainoa ero on se, että jsonp-tyypin kanssa callback-parametrin puuttuminen aiheuttaa virheen.</p>
<h2 id="kyselyiden-rakenne">Kyselyiden rakenne</h2>
<p>Kutsuissa käytettävät polut myötäilevät rest-filosofiaa. Polku sisältää haettavan resurssin tyypin sekä mahdollisen id-tunnisteen. Muut parametrit määritetään pyyntöosoitteen <em>query string</em> -osassa. Suodinehdot on mahdollista muuttaa kieltäviksi eli not-muotoisiksi lisäämällä parametrin nimen perään miinusmerkki. Kyselyn parametrit yhdistetään AND-konjunktiolla, eli tulosjoukkoon sisältyvät ne tietueet, jotka täsmäävät kaikkiin hakuehtoihin. Mikäli yksittäiselle parametrille on annettu monta arvoa, riittää että tietue täsmää johonkin niistä.</p>
<p>Kutsujen rakenne on seuraavanlainen:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/organisation?name=pasila&amp;city.name=helsinki&amp;format=jsonp&amp;callback=foo</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/organisation/81371?format=jsonp&amp;callback=foo</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/organisation/81371.json&amp;callback=foo</span></span></span></span></div></pre><h2 id="tietotyypit">Tietotyypit</h2>
<p>Tähän on listattu rajapinnan tukemat tietotyypit. Kaikille tietotyypeille pätevät yllä mainitut kaksi kutsuvaihtoehtoa.</p>
<table>
<thead>
<tr>
<th>Tyyppi</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>organisation</td>
<td>Organisaatio eli kirjasto, kirjastoauto, osasto, jne.</td>
</tr>
<tr>
<td>library</td>
<td>Muuten sama kuin &#39;organisaatio&#39;, mutta sisältää vain kirjastojen toimipisteet ja kirjastoautot</td>
</tr>
<tr>
<td>city</td>
<td>Kunta (Helsinki, Kuopio, Rovaniemi, ...)</td>
</tr>
<tr>
<td>consortium</td>
<td>Kirjastokimppa (HelMet, Keski-kirjastot, Vaski-kirjastot, ...)</td>
</tr>
<tr>
<td>opening_time</td>
<td>Kirjastojen aukioloajat</td>
</tr>
<tr>
<td>person</td>
<td>Organisaation henkilökunta</td>
</tr>
<tr>
<td>provincial_library</td>
<td>Maakuntakirjasto-alue</td>
</tr>
<tr>
<td>region</td>
<td>Maakunta-alue (Uusimaa, Pohjois-Savo, Lappi, ...)</td>
</tr>
<tr>
<td>service</td>
<td>Palvelu (esimerkiksi asiakaskäytössä oleva laite, lisäpalvelu tai tila)</td>
</tr>
</tbody>
</table>
<h2 id="sis-lt-jen-kielet-ja-kielikoodit">Sisältöjen kielet ja kielikoodit</h2>
<table>
<thead>
<tr>
<th>Kieli</th>
<th>Koodi</th>
</tr>
</thead>
<tbody>
<tr>
<td>Suomi</td>
<td>fi</td>
</tr>
<tr>
<td>Englanti</td>
<td>en</td>
</tr>
<tr>
<td>Ruotsi</td>
<td>sv</td>
</tr>
<tr>
<td>Saame</td>
<td>se</td>
</tr>
<tr>
<td>Venäjä</td>
<td>ru</td>
</tr>
</tbody>
</table>
<p>Sisällöt tuotetaan pääsääntöisesti suomeksi ja aluekohtaisesti ruotsiksi. Kirjastot päättävät itsenäisesti, millä kielillä he tarjoavat tietojaan.</p>
<h2 id="yleiset-parametrit">Yleiset parametrit</h2>
<p>Kaikki kutsut tukevat tiettyjä parametreja, joilla voidaan vaikuttaa vastauksen tietotyyppiin ja palautettavien tietojen laajuuteen.</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>Sallitut arvot</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>lang</td>
<td>en, fi, ru, se, sv</td>
<td>Palautettavan tietueen kieliversio [oletusarvo: kaikki kielet]</td>
</tr>
<tr>
<td>format</td>
<td>xml, json, jsonp</td>
<td>Vastauksen tietotyyppi [oletusarvo: json]</td>
</tr>
<tr>
<td>callback</td>
<td><em>merkkijono</em></td>
<td>Jsonp-formaattia käytettäessä callback-funktion nimi</td>
</tr>
<tr>
<td>limit</td>
<td><em>numero</em></td>
<td>Rajoittaa tulosten määrää per sivu [oletusarvo: 50]</td>
</tr>
<tr>
<td>skip</td>
<td><em>numero</em></td>
<td>Sivutettujen tulosten aloittaminen n:nnen tietueen kohdalta.</td>
</tr>
<tr>
<td>sort</td>
<td><em>lista</em></td>
<td>Tulosjoukon järjestämiseen käytetyt kentät</td>
</tr>
</tbody>
</table>
<h2 id="hakuehdot-ja-j-rjest-minen">Hakuehdot ja järjestäminen</h2>
<p>Useita hakuehtoja käytettäessä tulosjoukko sisältää ne tietueet, jotka täsmäävät kaikkiin hakuehtoihin. Mikäli yksittäinen parametri hyväksyy monta arvoa (pilkuilla erotettuna listana), tietueiden tulee täsmätä johonkin kyseisen joukon arvoista. Hakuehdot voi kääntää kielteisiksi lisäämällä parametrin nimen <strong>perään</strong> miinusmerkin. (?city.name-=helsinki)</p>
<p>Hakukyselyiden palauttamien tulosjoukkojen järjestämiseen voi käyttää pääsääntöisesti kaikkien suodinparametrien nimiä. Järjestäminen useamman kuin yhden parametrin avulla on sallittua. Järjestys on oletusarvoisesti pienimmästä suurimpaan, mutta sen voi kääntää ympäri parametrikohtaisesti liittämällä parametrin <strong>eteen</strong> miinusmerkin (?sort=city.name,-name).</p>
<p>Kieliriippuvaisten kenttien mukaan suotiessa ja järjestettäessä käytetään valittua kieltä. Mikäli kieltä ei ole valittu, tulosjoukko sisältää arvot kaikilla kielillä, mutta suotiminen ja järjestäminen tehdään suomenkielisten arvojen perusteella.</p>
<h2 id="kuvat">Kuvat</h2>
<p>Tietueisiin lisätyistä kuvista luodaan automaattisesti eri kokoja. Rajapinta luo automaattisesti linkit kaikkiin saatavilla oleviin kokoihin. Kuvatietojen arvo on joko <em>null</em>, mikäli kuvaa ei ole saatavilla, tai avain-arvo-pareista muodostuva hash, jolloin avaimena toimii kuvakoon tunniste ja arvona täysi osoite kuvaan.</p>
<p>Ilmoitetut resoluutiot ovat enimmäisarvoja, eli mitat alittavia kuvia ei skaalata suuremmiksi. Pääsääntöisesti säilyttävät alkuperäiset mittasuhteensa kaikissa kokoluokissa.</p>
<table>
<thead>
<tr>
<th>Kuvakoko</th>
<th>Resoluutio (max)</th>
</tr>
</thead>
<tbody>
<tr>
<td>small</td>
<td>200 x 200 px</td>
</tr>
<tr>
<td>medium</td>
<td>1000 x 1000 px</td>
</tr>
<tr>
<td>large</td>
<td>1980 x 1980 px</td>
</tr>
<tr>
<td>huge</td>
<td>3840 x 3840 px</td>
</tr>
</tbody>
</table>
<h1 id="organisaatiot-kirjastot">Organisaatiot / kirjastot</h1>
<p>Kutsun osoitteen muoto on seuraava:</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/organisation?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/library?parametrit</span></span></span></span></div></pre><p>Organisaation ja kirjaston (library) välinen ero type-parametrin oletusarvossa. Organisaatio on geneerinen tyyppi, joka kattaa toimipisteiden ohella osastot, kirjastoautojen pysäkit sekä erilaiset metatietueet jne. Library-tyyppi on oikopolku, jolla suoditaan pois muut kuin toimipisteet ja kirjastoautot.</p>
<p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>with</td>
<td>X</td>
<td></td>
<td>Sisällyttää tietueisiin valinnaisia tietolohkoja (ks. listaus alempana)</td>
</tr>
<tr>
<td>refs</td>
<td>X</td>
<td></td>
<td>Valittujen alitietueiden palauttaminen osana tulosta</td>
</tr>
<tr>
<td>branch_type</td>
<td>X</td>
<td>X</td>
<td>Kirjaston toimipiste -tyyppisten (branchlibrary) tietueiden alakategoria (ks. listaus alempana)</td>
</tr>
<tr>
<td>created.after</td>
<td></td>
<td></td>
<td>Hakee tietueet, jotka on luotu myöhemmin kuin määrättynä pvm:nä</td>
</tr>
<tr>
<td>created.before</td>
<td></td>
<td></td>
<td>Tietueiden viimeinen luonti-pvm</td>
</tr>
<tr>
<td>city</td>
<td>X</td>
<td>X</td>
<td>Kunnan id-tunniste</td>
</tr>
<tr>
<td>city.name</td>
<td>X</td>
<td>X</td>
<td>Kunnan täsmällinen nimi. Haettaessa ruotsin kielellä käytetään ruotsalaista nimeä</td>
</tr>
<tr>
<td>city.slug</td>
<td>X</td>
<td>X</td>
<td>Kunnan nimestä johdettu tunniste</td>
</tr>
<tr>
<td>consortium</td>
<td>X</td>
<td>X</td>
<td>Kirjastokimpan id-tunniste</td>
</tr>
<tr>
<td>distance</td>
<td></td>
<td>X</td>
<td>Määrittää koordinaattihaussa sallitun etäisyyden määrätystä pisteestä; arvo kilometreinä (1 = 1 km, 100 = 100 km)</td>
</tr>
<tr>
<td>geo</td>
<td></td>
<td></td>
<td>Koordinaattiparilla hakeminen (käytetään yhdessä distance-parametrin kanssa) (24.3434,71.1235)</td>
</tr>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Parametria voidaan käyttää, kun halutaan hakea monen tunnetun tietueen tiedot yhdellä kertaa</td>
</tr>
<tr>
<td>identificator</td>
<td>X</td>
<td></td>
<td>Kirjaston virallinen tunniste (kenttä extra.identificator)</td>
</tr>
<tr>
<td>modified.after</td>
<td></td>
<td>X</td>
<td>Hakee tietueet, joita muokattu myöhemmin kuin määrättynä pvm:nä</td>
</tr>
<tr>
<td>modified.before</td>
<td></td>
<td></td>
<td>Tietueiden viimeinen muokkaus-pvm</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee kirjastot, joiden nimi alkaa määrätyllä merkkijonolla. Riippuu valitusta kielestä.</td>
</tr>
<tr>
<td>region</td>
<td>X</td>
<td>X</td>
<td>Maakunta-alueen id-tunniste</td>
</tr>
<tr>
<td>region.name</td>
<td>X</td>
<td>X</td>
<td>Maakunta-alueen täsmällinen nimi. Riippuu valitusta kielestä.</td>
</tr>
<tr>
<td>region.slug</td>
<td>X</td>
<td>X</td>
<td>Maakunta-alueen nimestä johdettu tunniste</td>
</tr>
<tr>
<td>period.start</td>
<td></td>
<td></td>
<td>Kun sisällytetään aukiolotiedot, voidaan määrittää haettava väli</td>
</tr>
<tr>
<td>period.end</td>
<td></td>
<td></td>
<td>Kun sisällytetään aukiolotiedot, voidaan määrittää haettava väli</td>
</tr>
<tr>
<td>service</td>
<td>X</td>
<td></td>
<td>Organisaatioon liitetyn palvelun id-tunniste</td>
</tr>
<tr>
<td>service.name</td>
<td></td>
<td></td>
<td>Hakee organisaatiot, joihin on liitetty palvelu, jonka (ei-täsmällinen) nimi alkaa määrätyllä merkkijonolla</td>
</tr>
<tr>
<td>service.slug</td>
<td>X</td>
<td></td>
<td>Palvelutietueen nimestä johdettu tunniste</td>
</tr>
<tr>
<td>short_name</td>
<td></td>
<td>X</td>
<td>Tietueen nimen mahdollinen lyhyempi muoto. Riippuu valitusta kielestä.</td>
</tr>
<tr>
<td>type</td>
<td>X</td>
<td>X</td>
<td>Tietuiden päätason tyyppi (ks. listaus alempana)</td>
</tr>
</tbody>
</table>
<p>Lisäksi tulokset voi järjestää ehdoilla <em>modified</em> sekä <em>created</em>, jotka ilmaisevat muokkaus- ja luontipäivämääriä.</p>
<h2 id="organisaatiotyypit-type-">Organisaatiotyypit (type)</h2>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Tunniste (api-v2)</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>library</td>
<td>branchlibrary</td>
<td>Kirjaston toimipiste (&quot;kirjasto&quot;)</td>
</tr>
<tr>
<td>centralized_service</td>
<td>unit</td>
<td>Keskitetty palvelu</td>
</tr>
<tr>
<td>department</td>
<td>department</td>
<td>Osasto</td>
</tr>
<tr>
<td>facility</td>
<td>library</td>
<td>Kirjastolaitos</td>
</tr>
<tr>
<td>mobile_stop</td>
<td>mobile_stop</td>
<td>Kirjastoauton pysäkki</td>
</tr>
<tr>
<td>other</td>
<td>organisation</td>
<td>Muu organisaatio</td>
</tr>
</tbody>
</table>
<h2 id="toimipisteiden-alatyypit-branch_type-">Toimipisteiden alatyypit (branch_type)</h2>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Tunniste (api-v2)</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>children</td>
<td>childrens_library</td>
<td>Lasten kirjasto</td>
</tr>
<tr>
<td>home_service</td>
<td>home_service</td>
<td>Kotipalvelu</td>
</tr>
<tr>
<td>institutional</td>
<td>institution_library</td>
<td>Laitoskirjasto</td>
</tr>
<tr>
<td>library</td>
<td>default</td>
<td>Kirjasto (yleinen kirjaston toimipiste)</td>
</tr>
<tr>
<td>main_library</td>
<td>main_library</td>
<td>Pääkirjasto</td>
</tr>
<tr>
<td>mobile</td>
<td>mobile</td>
<td>Kirjastoauto</td>
</tr>
<tr>
<td>music</td>
<td>music_library</td>
<td>Musiikkikirjasto</td>
</tr>
<tr>
<td>other</td>
<td>other</td>
<td>Muu kirjastoalan organisaatio</td>
</tr>
<tr>
<td>polytechnic</td>
<td>polytechnic_library</td>
<td>Ammattikorkeakoulukirjasto</td>
</tr>
<tr>
<td>regional</td>
<td>regional</td>
<td>Aluekirjasto</td>
</tr>
<tr>
<td>school</td>
<td>-</td>
<td>Koulukirjasto</td>
</tr>
<tr>
<td>special</td>
<td>special_library</td>
<td>Erikoiskirjasto</td>
</tr>
<tr>
<td>university</td>
<td>university_library</td>
<td>Yliopistokirjasto</td>
</tr>
<tr>
<td>vocational_college</td>
<td>vocational_college_library</td>
<td>Ammattioppilaitoskirjasto</td>
</tr>
</tbody>
</table>
<h2 id="valinnaiset-tiedot-with-">Valinnaiset tiedot (with)</h2>
<p>Siirrettävän tiedon optimoimiseksi organisaatiotietueet eivät oletuksena sisällä kaikkia vähemmän tarpeellisia tietolohkoja. Ne voidaan &#39;aktivoida&#39; antamalla with-parametrille taulukossa esiteltyjä arvoja. Kyseiset arvot vastaavat tietueessa samannimistä kenttää, jonka arvona on joko assosiatiivinen taulukko tai lista.</p>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>accessibility</td>
<td>Esteettömyystiedot</td>
</tr>
<tr>
<td>extra</td>
<td>Sekalaisia tietoja, jotka on siirrettävän datan määrän optimoimiseksi siirretty miljoonalaatikkoon</td>
</tr>
<tr>
<td>links</td>
<td>Linkkejä ulkoisiin palveluihin kuten some-palveluihin (<strong>deprecated</strong>)</td>
</tr>
<tr>
<td>link_groups</td>
<td>Sama kuin yllä mutta linkit on jaoteltu ryhmiin.</td>
</tr>
<tr>
<td>mail_address</td>
<td>Mahdollinen toimipisteen sijainnista poikkeava postiosoite</td>
</tr>
<tr>
<td>persons</td>
<td>Lista organisaation tietueeseen liitetyistä työntekijöistä</td>
</tr>
<tr>
<td>phone_numbers</td>
<td>Lista puhelinnumeroista</td>
</tr>
<tr>
<td>pictures</td>
<td>Lista valokuvista</td>
</tr>
<tr>
<td>services</td>
<td>Lista palveluista</td>
</tr>
<tr>
<td>schedules</td>
<td>Aukiolotiedot määrätylle ajanjaksolle. Aikaväli määritetään lisäparametrein period.start ja period.end</td>
</tr>
</tbody>
</table>
<h2 id="organisaatiokyselyn-relaatiot-refs-">Organisaatiokyselyn relaatiot (refs)</h2>
<p>Refs-parametrilla voidaan asettaa rajapinta palauttamaan linkitetyt tietueet osana tulosjoukkoa. Nämä tietueet löytyvät tuloksen juuresta kentästä <em>references</em>. Se käsittää joukon avain-arvo-pareja, missä avain on alitietueen tyyppi (esim. city) ja arvo on vastaavalla tavalla rakenteistettu joukko avain-arvo-pareja.</p>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>city</td>
<td>Kunnat, joihin tulosjoukon organisaatiotietueet viittaavat.</td>
</tr>
<tr>
<td>region</td>
<td>Maakunnat (kuten yllä)</td>
</tr>
<tr>
<td>provincial_library</td>
<td>Maakuntakirjastoalueet (kuten yllä)</td>
</tr>
<tr>
<td>consortium</td>
<td>Kirjastokimpat (kuten yllä)</td>
</tr>
<tr>
<td>period</td>
<td>Käytetään parametrin ?with=schedules kanssa; hakee aukioloihin liittyvät jaksotiedot.</td>
</tr>
</tbody>
</table>
<p><strong>Typistetty esimerkki</strong></p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;total&quot;:&nbsp;2,</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&quot;type&quot;:&nbsp;&quot;organisation&quot;,</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&quot;items&quot;:&nbsp;[{...},&nbsp;{...}],</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&quot;references&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;city&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;16094&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;id&quot;:&nbsp;16094,</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;fi&quot;:&nbsp;&quot;Salo&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>},</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;16031&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;id&quot;:&nbsp;16031,</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot;:&nbsp;{</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>&quot;fi&quot;:&nbsp;&quot;Nurmes&quot;</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span>&nbsp;&nbsp;</span><span class="meta paragraph text"><span>}</span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span>}</span></span></span></div></pre><h2 id="kuvaustekstin-muotoilut">Kuvaustekstin muotoilut</h2>
<p>Kirjastojen kuvausteksti (extra.description) on html-muotoiltu merkkijono. Vanhat rajapinnat palauttivat kuvaustekstin plaintext-muodossa, mutta uudessa Kirjastohakemistossa kyseinen kuvaus on muutettu rikastekstiksi. Kuvauksen syöttämiseen käytetään CKEditor-tekstieditoria ja sen oletusmuotoiluja. Teksti voi sisältää linkkejä, listoja ja taulukoita.</p>
<h2 id="kirjastokohtaiset-palvelutiedot">Kirjastokohtaiset palvelutiedot</h2>
<h3 id="palveluiden-nimet">Palveluiden nimet</h3>
<p>Organisaatioon liitetyissä palvelutiedoissa on kaksi kenttää palvelun nimelle. Pääasiallinen nimi on name-kentässä ja sen arvo on aina sama kuin palvelulla, johon id-kentän arvo viittaa. Lisäksi on olemassa kenttä custom_name vaihtoehtoiselle nimelle. Kyseistä nimeä voidaan käyttää silloin, kun palvelulle on haluttu määrittää täsmällisempi, organisaatiokohtainen nimi. Oletusarvo on <em>null</em>.</p>
<p>Kirjastohakemistossa käyttötarkoitus custom_namelle on korvata palvelun alkuperäinen nimi kirjaston esittelysivulla. Yleisessä haussa palveluiden suotimiseen käytetään vain yleistä nimeä.</p>
<h3 id="muuta">Muuta</h3>
<p>Upotetut palvelutiedot eroavat yleisistä palvelutiedoista siten, että niissä on lisäkenttiä, jotka kertovat palvelun saatavuudesta kyseisessä organisaatiossa (kirjastossa). Myös palvelun kuvausteksti vaihtelee toimipisteittäin. Upotetuissa palvelutiedoissa ilmoitettu palvelun ID-tunniste on sama kuin samannimisen palvelun tunniste yleisissä palvelutiedoissa.</p>
<h2 id="esimerkkej-kyselyist-">Esimerkkejä kyselyistä</h2>
<p>Haetaan Oulussa ja Rovaniemellä sijaitsevia kirjastoja. (Kunnan ID-tunniste testiympäristössä.)</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/library?city=15404,15453</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/library?city.name=oulu,rovaniemi</span></span></span></span></div></pre><p>Haetaan Uudenmaan ja Pohjois-Savon alueella sijaitsevia kirjastoja. (Maakunnan ID-tunniste testiympäristössä.)</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/library?region=963,974</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/library?region.name=uusimaa,pohjois-savo</span></span></span></span></div></pre><p>Haetaan kirjastoja, jotka sijaitsevat 10 km:n säteellä Helsingin rautatieasemalta ja joista löytyy kopiokone.
<code style="font-family: &apos;Droid Sans Mono&apos;, monospace;">https://api.kirjastot.fi/v3/library?geo=60.171142,24.944387&amp;distance=10&amp;service.name=kopiokone</code></p>
<p>Kirjastot joilla on palvelut (id-tunnisteet) X ja Y.
<code style="font-family: &apos;Droid Sans Mono&apos;, monospace;">https://api.kirjastot.fi/v3/library?service=X,Y</code></p>
<p>Pasilan kirjaston tietue sisältäen aukioloajat marraskuulle 2015.
<code style="font-family: &apos;Droid Sans Mono&apos;, monospace;">https://api.kirjastot.fi/v3/library/81371?with=schedules&amp;period.start=2015-11-01&amp;period.end=2015-11-30</code></p>
<h1 id="aukioloajat-opening_time-">Aukioloajat (opening_time)</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/opening_time?parametrit</span></span></span></span></div></pre><p>Aukiolotietoja voi hakea erikseen massahakuna. Huomaa, että sivutus pätee myös aikatauluhaussa, joten suurilla aikaväleillä tai kirjastojen määrillä kaikkia tuloksia ei välttämättä näytetä yhdellä kertaa.</p>
<p>Aukioloajat ilmoitetaan päiväkohtaisina tietueina. Yhdellä kyselyllä on mahdollista hakea monen organisaation aukiolotiedot samalla kertaa.</p>
<p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>organisation</td>
<td>X</td>
<td>X</td>
<td>Organisaation tietueen id-tunniste</td>
</tr>
<tr>
<td>period.start</td>
<td></td>
<td></td>
<td>Aikavälin ensimmäinen päivä</td>
</tr>
<tr>
<td>period.end</td>
<td></td>
<td></td>
<td>Aikavälin viimeinen päivä</td>
</tr>
</tbody>
</table>
<h2 id="aukiolokyselyn-relaatiot-refs-">Aukiolokyselyn relaatiot (refs)</h2>
<p>Kuten organisaatiokyselyissä, tässäkin refs-parametrilla voidaan käskeä rajapintaa sisällyttämään valituntyyppiset linkitetyt tietueet tulokseen kenttään <em>references</em>.</p>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>period</td>
<td>Aukiolojaksojen tiedot</td>
</tr>
</tbody>
</table>
<h2 id="suhteelliset-aikav-lit">Suhteelliset aikavälit</h2>
<p>Aikavälin rajoittamiseen voi käyttää myös suhteellisia arvoja. Referenssipisteenä käytetään aina kuluvaa päivää. Suhteellisen aikavälin määrittämiseen voi käyttää yksikköinä päiviä, viikkoja sekä kuukausia. Myös negatiiviset arvot sekä nollamääräiset arvot (&#39;0d&#39;, &#39;0w&#39;, &#39;0m&#39;) ovat sallittuja.</p>
<table>
<thead>
<tr>
<th>Yksikkö</th>
<th>Koodi</th>
</tr>
</thead>
<tbody>
<tr>
<td>kuluva päivä</td>
<td>today</td>
</tr>
<tr>
<td>päivä</td>
<td>d</td>
</tr>
<tr>
<td>viikko</td>
<td>w</td>
</tr>
<tr>
<td>kuukausi</td>
<td>m</td>
</tr>
</tbody>
</table>
<h3 id="yksik-n-ja-parametrin-merkitys">Yksikön ja parametrin merkitys</h3>
<p>Vaikka suhteellinen arvon lähtökohtana käytetään aina kuluvaa päivää, arvoa vastaava tarkka päivämäärä riippuu myös käytetystä yksiköstä sekä siitä, onko parametri alaraja (period.start) vai yläraja (period.end). Myös nolla-arvoa vastaava eksakti päivämäärä vaihtelee sen kanssa käytetyn yksikön mukaan. Suhteellisten aikavälien logiikka on ajateltu sellaiseksi, että ne palauttavat aina käytetyn yksikön mukaisesti täysiä &quot;kalenterijaksoja&quot; eli täysiä viikkoja tai kalenterikuukausia.</p>
<table>
<thead>
<tr>
<th>Yksikkö</th>
<th>Parametri</th>
<th>Esim.</th>
<th>Tarkka arvo</th>
</tr>
</thead>
<tbody>
<tr>
<td>week</td>
<td>period.start</td>
<td>-2w</td>
<td>kyseisen viikon maanantai</td>
</tr>
<tr>
<td>week</td>
<td>period.end</td>
<td>4w</td>
<td>kyseisen viikon sunnuntai</td>
</tr>
<tr>
<td>month</td>
<td>period.start</td>
<td>2m</td>
<td>kuukauden ensimmäinen päivä</td>
</tr>
<tr>
<td>month</td>
<td>period.end</td>
<td>3m</td>
<td>kuukauden viimeinen päivä</td>
</tr>
</tbody>
</table>
<p><strong>Esimerkkejä</strong></p>
<p>Taulukon esimerkkiarvot on laskettu käyttäen referenssipäivänä perjantaita 6.11.2015.</p>
<table>
<thead>
<tr>
<th>Alaraja</th>
<th>Yläraja</th>
<th>Aikaväli</th>
</tr>
</thead>
<tbody>
<tr>
<td>0d</td>
<td>0d</td>
<td>2015-11-06 – 2015-11-06</td>
</tr>
<tr>
<td>0w</td>
<td>0w</td>
<td>2015-11-02 – 2015-11-08</td>
</tr>
<tr>
<td>0m</td>
<td>0m</td>
<td>2015-11-01 – 2015-11-30</td>
</tr>
<tr>
<td>0m</td>
<td>2m</td>
<td>2015-11-01 – 2016-01-31 (täysiä kuukausia)</td>
</tr>
<tr>
<td>0d</td>
<td>2m</td>
<td>2015-11-06 – 2016-01-31 (kuluva päivä – kuun loppu)</td>
</tr>
<tr>
<td>0w</td>
<td>2m</td>
<td>2015-11-02 – 2016-01-31 (maanantai – kuun loppu)</td>
</tr>
<tr>
<td>0m</td>
<td>2w</td>
<td>2015-11-01 – 2015-11-22 (kuun alku – sunnuntai)</td>
</tr>
<tr>
<td>-2d</td>
<td>3d</td>
<td>2015-11-04 – 2015-11-09 (ke-ma)</td>
</tr>
<tr>
<td>-2w</td>
<td>2w</td>
<td>2015-10-19 – 2015-11-22 (täysiä viikkoja ma-su)</td>
</tr>
<tr>
<td>-1m</td>
<td>1m</td>
<td>2015-10-01 – 2016-12-31 (täysiä kuukausia)</td>
</tr>
</tbody>
</table>
<h2 id="monta-aukioloa-per-p-iv-">Monta aukioloa per päivä</h2>
<p>Jotkin kirjastoista voivat olla hetkellisesti suljettuna keskellä päivää, mutta yleisesti ottaen tämä on harvinaista. Tämän vuoksi rajapinnan palauttamissa tietueissa aukiolot ilmoitetaan kahdella eri tavalla.</p>
<ol>
<li>Yksinkertaistettu muoto: aukiolotietueen juuressa kentät <strong>opens</strong> ja <strong>closes</strong>.</li>
<li>Täydellinen muoto: lista arvopareja <strong>opens</strong> ja <strong>closes</strong> kentässä <strong>times</strong>.</li>
</ol>
<p>Molemmat esitysmuodot pätevät kaikissa tilanteissa. Niissä tapauksissa, missä kirjasto on päivän aikana auki pätkittäin, yksinkertaistettu muoto ilmoittaa päivän ensimmäisen aukeamisajan ja viimeisen sulkeutumisajan.</p>
<p>Katso myös seuraavasta kappaleesta lisähuomautus koskien omatoimikirjastojen aukioloja.</p>
<h2 id="osastokohtaiset-aukiolot">Osastokohtaiset aukiolot</h2>
<p>Joillakin toimipisteillä voi olla normaalista poikkeavia aukioloaikoja eri osastoilla, tai kirjastot voivat toimia osan ajasta ns. omatoimikirjastoina, jolloin henkilökunta ei ole paikalla mutta kirjastoon pääsee sisälle esimerkiksi kirjastokortilla tunnistautumalla. Mikäli toimipisteen tietueelle on syötetty tällaisia aukiolotietoja, ne löytyvät päivätietueesta kentästä <strong>sections</strong>, joka on assosiatiivinen taulukko kaikista syötetyistä osastoista.</p>
<p>Osastotiedoissa omatoimikirjasto on erikoistapaus, jota tulisi pitää tavallisten aukioloaikojen laajennuksena. Omatoimikirjaston aukioloajat voivat syöttötavasta riippuen limittyä normaalien aukioloaikojen kanssa, jolloin omatoimikirjaston aukioloiksi tulisi ajatella ne ajanjaksot, jolloin normaalien aukiolotietojen mukaan kirjasto olisi suljettuna.</p>
<p>Valittavissa olevat osastot ovat kaikille kirjastoille samat. Toistaiseksi käytössä ovat seuraavat osastot:</p>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>magazines</td>
<td>Lehtisali</td>
</tr>
<tr>
<td>selfservice</td>
<td>Omatoimikirjasto</td>
</tr>
</tbody>
</table>
<h2 id="kirjastoautojen-reitit">Kirjastoautojen reitit</h2>
<p>Kirjastohakemistossa kirjastoautojen pysäkit ovat itsenäisiä organisaatiotietueita. Niiden aukiolotiedot ovat siten haettavissa kuten kaikkien muidenkin organisaatiotietueiden. Useimmiten pysäkkien aukiolot kiinnostavat kuitenkin osana kirjastoauton kulkemaa reittiä. Tämän vuoksi kirjastoauton aukioloaikojen tietueissa on erikoistapauksena kenttä <strong>route</strong>, joka sisältää kyseisen päivän reittiin kuuluvat pysäkit kronologisessa järjestyksessä.</p>
<p>Tämän lisäksi tavallisista toimipisteistä tutut kentät <strong>opens</strong> ja <strong>closes</strong> ilmaisevat päivän ensimmäisen pysäkin saapumisajan ja viimeisen pysäkin lähtöajan. Jos kirjastoauto ei kierrä lainkaan, on päivätietueen <strong>closed</strong>-kentän arvo &#39;true&#39; ja reittilista tyhjä.</p>
<p>Päiväkohtaiset reittitiedot sisältävät siis vain ne pysäkit, joiden kautta kirjastoauto kyseisenä päivänä kulkee. (Siis pysäkit, jotka ovat auki tuolloin.) Mikäli halutaan selvittää kaikki mahdolliset kirjastoauton kiertämät pysäkit, ne voidaan hakea erillisellä organisaatiokyselyllä määrittämällä parent-parametrin arvoksi kirjastoauton id.</p>
<h1 id="aukiolojaksot-period-">Aukiolojaksot (period)</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/period?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/period/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>Jaksotiedot ovat ikään kuin aukiolojen ryhmiä. Jokainen jakso määrää tietyn aikavälin aukiolot. Aikaväli voidaan määritellä joko suljetuksi tai loppupäästä avoimeksi (ns. oletusjakso), jolloin se on voimassa toistaiseksi. Jaksot voivat myös limittyä, jolloin korkein prioriteetti on 1) suljetulla jaksolla 2) myöhemmin alkavalla jaksolla.</p>
<p>Pääsääntöisesti aukiolojaksot syötetään niin, että voimassa oleva puoliavoin jakso kertoo kirjaston tavalliset aukioloajat (talviajat) ja suljetut jaksot ovat lyhyitä poikkeuksia normaaliin.</p>
<p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Parametria voidaan käyttää, kun halutaan hakea monen tunnetun tietueen tiedot yhdellä kertaa</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee tietueet, joiden nimi alkaa määrätyllä merkkijonolla. Arvo riippuu kielestä.</td>
</tr>
<tr>
<td>organisation</td>
<td>X</td>
<td>X</td>
<td>Organisaatio, jonka aukiolot tietue määrittää</td>
</tr>
<tr>
<td>valid_from</td>
<td>X</td>
<td>X</td>
<td>Tarkka jakson alkamispäivä</td>
</tr>
<tr>
<td>valid_until</td>
<td>X</td>
<td>X</td>
<td>Tarkka jakson päättymispäivä</td>
</tr>
</tbody>
</table>
<h1 id="yleiset-palvelutiedot">Yleiset palvelutiedot</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/service?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/service/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>Tällä kyselyllä haettavat palvelutiedot ovat niin sanottuna yleispohjia. Palvelutietoja voidaan käyttää esimerkiksi kirjastojen hakulomakkeen palvelulistan muodostamiseksi. Nämä palvelutiedot eroavat kirjastojen tietueisiin upotetuista palveluista siten, että kirjastojen tiedoissa palveluilla on enemmän kenttiä (hinta, lainattavissa, jne.) ja lisäksi palvelun kuvaustieto (description) voi olla kirjastokohtaisesti eri.</p>
<p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Parametria voidaan käyttää, kun halutaan hakea monen tunnetun tietueen tiedot yhdellä kertaa</td>
</tr>
<tr>
<td>created.after</td>
<td></td>
<td></td>
<td>Hakee tietueet, jotka on luotu myöhemmin kuin määrättynä pvm:nä</td>
</tr>
<tr>
<td>created.before</td>
<td></td>
<td></td>
<td>Viimeinen luonti-pvm</td>
</tr>
<tr>
<td>modified.after</td>
<td></td>
<td></td>
<td>Hakee tietueet, joita muokattu myöhemmin kuin määrättynä pvm:nä</td>
</tr>
<tr>
<td>modified.before</td>
<td></td>
<td></td>
<td>Viimeinen muokkaus-pvm</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee tietueet, joiden nimi alkaa määrätyllä merkkijonolla. Arvo riippuu kielestä.</td>
</tr>
<tr>
<td>type</td>
<td>X</td>
<td>X</td>
<td>Palvelun tyypin tunnisteella suotiminen</td>
</tr>
</tbody>
</table>
<h1 id="henkil-kunta">Henkilökunta</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/person?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/person/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>Henkilökuntatietojen kattavuus on vaihtelevaa. Pääsääntöisesti on toivottavaa, että vähintään avainhenkilöiden tiedot olisi syötetty.</p>
<p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Voi käyttää tunnettujen henkilötietueiden hakemiseen yhdellä kyselyllä</td>
</tr>
<tr>
<td>first_name</td>
<td></td>
<td>X</td>
<td>Etunimihaku</td>
</tr>
<tr>
<td>last_name</td>
<td></td>
<td>X</td>
<td>Sukunimihaku</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td></td>
<td>Koko nimellä hakeminen</td>
</tr>
<tr>
<td>organisation</td>
<td>X</td>
<td>X</td>
<td>Sen organisaation id, johon henkilöt liitetty</td>
</tr>
</tbody>
</table>
<h1 id="kirjastokimpat">Kirjastokimpat</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/consortium?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/consortium/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Voi käyttää tunnettujen kuntien tietueiden hakemiseen yhdellä kyselyllä</td>
</tr>
<tr>
<td>slug</td>
<td>X</td>
<td>X</td>
<td>Kirjastokimpan url-tunniste</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee kimpat, joiden nimi alkaa määrätyllä merkkijonolla (kieliriippuvainen)</td>
</tr>
<tr>
<td>special</td>
<td></td>
<td></td>
<td>Boolean. False-arvo suotii pois ei-kirjastoalan kimpat, True-arvo toisin päin.</td>
</tr>
<tr>
<td>finna:id</td>
<td>X</td>
<td></td>
<td>Finna-palvelussa käytetty tunniste</td>
</tr>
</tbody>
</table>
<h2 id="kimppatietojen-laajennukset-with-">Kimppatietojen laajennukset (with)</h2>
<p>Kuten organisaatioiden / kirjastojen kanssa, myös kirjastokimpat sisältävät lohkoja, joita ei oletusarvoisesti sisällytetä hakutuloksiin.</p>
<table>
<thead>
<tr>
<th>Tunniste</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>finna</td>
<td>Finna-laajennukset</td>
</tr>
<tr>
<td>link_groups</td>
<td>Vapaasti määriteltäviä linkkejä ulkoisiin verkkosivustoihin.</td>
</tr>
</tbody>
</table>
<h1 id="kunnat">Kunnat</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/city?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/city/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Voi käyttää tunnettujen kuntien tietueiden hakemiseen yhdellä kyselyllä</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee kunnat, joiden nimi alkaa määrätyllä merkkijonolla (kieliriippuvainen)</td>
</tr>
<tr>
<td>consortium</td>
<td>X</td>
<td>X</td>
<td>Kirjastokimpan id-tunniste</td>
</tr>
<tr>
<td>region</td>
<td>X</td>
<td>X</td>
<td>Maakunnan id-tunniste</td>
</tr>
<tr>
<td>provincial_library</td>
<td>X</td>
<td>X</td>
<td>Maakuntakirjastoalueen id-tunniste</td>
</tr>
</tbody>
</table>
<h1 id="maakunnat">Maakunnat</h1>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/region?parametrit</span></span></span></span></div><div class="line"><span class="text plain"><span class="meta paragraph text"><span class="markup underline link https hyperlink"><span>https://api.kirjastot.fi/v3/region/</span></span><span>&lt;id&gt;</span></span></span></div></pre><p>M := hyväksyy monta valintaa kerralla pilkuin erotettuna listana (foo,bar,baz)
S := kenttää voi käyttää järjestämiseen sort-parametrin arvona</p>
<table>
<thead>
<tr>
<th>Parametri</th>
<th>M</th>
<th>S</th>
<th>Kuvaus</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>X</td>
<td>X</td>
<td>Voi käyttää tunnettujen kuntien tietueiden hakemiseen yhdellä kyselyllä</td>
</tr>
<tr>
<td>name</td>
<td></td>
<td>X</td>
<td>Hakee maakunnat, joiden nimi alkaa määrätyllä merkkijonolla (kieliriippuvainen)</td>
</tr>
</tbody>
</table>
  </main>
  <footer>Palaute ja ongelmat: tekniikka@kirjastot.fi</footer>
  <script src="build/navigen.js"></script>

  <script type="text/x-template" id="tpl-nav">
    <nav id="doc-nav">
      {{nav items}}
    </nav>
  </script>

  <script type="text/x-template" id="tpl-nav-links">
    <ul>
      {{#each this}}
        <li>
          <a href="{{ href }}">{{ label }}</a>
          {{#if children}}
            {{nav children}}
          {{/if}}
        </li>
      {{/each}}
    </ul>
  </script>
</body>
</html>
